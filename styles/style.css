@import url('https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300;400;500;600;700&display=swap');

:root {
  --font-sans: Fira Sans, sans-serif;
  --font-display: Fira Sans, sans-serif;

  --page-bg: #f9f9f9;
  --card-bg: #ffffff;
  --ink: #1a1a2e;
  --ink-muted: #444;
  --ink-muted-2: #666;
  --ink-muted-3: #333;
  --ink-dim: #636e72;

  --bg: var(--page-bg);
  --muted2: rgba(0, 0, 0, 0);

  --accent: hsl(265, 56%, 33%);
  --accent-hover: hsl(265, 56%, 40%);
  --accent-soft: hsl(265, 56%, 95%);
  --accent-muted: hsl(265, 56%, 70%);
  --accent-border: hsl(265, 56%, 85%);
  --accent-outline: hsl(265, 70%, 50%);

  --ring-card-bg: hsl(256, 35%, 57%, 0.12);
  --ring-color-1: hsl(265, 56%, 33%, 1);
  --ring-color-2: hsl(265, 56%, 33%, 0.75);
  --ring-color-3: hsl(265, 56%, 33%, 0.5);
  --ring-color-4: hsl(265, 56%, 33%, 0.25);

  --shadow-card: 0 8px 40px rgba(0, 0, 0, 0.05), 0 2px 10px rgba(0, 0, 0, 0.025);
  --shadow-button: 0 2px 8px rgba(75, 37, 130, 0.3);
  --shadow-button-hover: 0 4px 12px rgba(75, 37, 130, 0.4);
  --shadow-button-secondary: 0 2px 8px rgba(0, 0, 0, 0.05);
  --shadow-button-secondary-hover: 0 4px 12px rgba(0, 0, 0, 0.1);

  --content-max-width: 1200px;
  --content-max-width-tight: 1180px;
  --page-gutter: 20px;
  --header-margin-bottom: 60px;

  --section-padding: 40px;
  --download-gap: 20px;
  --filter-padding-right: 20px;
  --filter-margin-bottom: 60px;
  --filter-group-gap: 12px;
  --filter-row-gap: 12px;

  --footer-gap: 40px;
  --footer-padding: 30px 30px 40px;
  --footer-left-width: 38ch;
  --ring-grid-columns: 40ch 40ch;
  --ring-grid-gap: 15px;
  --ring-card-padding: 12px 15px;
  --ring-card-radius: 4px;
  --ring-card-border-width: 30px;

  --button-radius: 8px;
  --button-font-size: 14px;
  --button-font-weight: 600;
  --button-padding: 10px 20px;
  --filter-button-padding: 8px 20px;
  --download-button-offset-x: -4px;

  --label-font-size: 14px;
  --label-letter-spacing: 0.02em;
  --label-month-font-size: 15px;
  --label-month-font-weight: 600;
  --label-month-font-size-active: 18px;
  --label-month-font-weight-active: 700;

  --center-label-font-family: var(--font-display);
  --center-label-font-weight: 700;
  --center-label-font-size: 32px;

  --period-active-fill: var(--ring-color-1);

  --marker-shadow: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
  --marker-shadow-hover: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));

  --tooltip-bg: rgba(26, 26, 46, 0.95);
  --tooltip-text: #fff;
  --tooltip-padding: 8px 12px;
  --tooltip-radius: 8px;
  --tooltip-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  --tooltip-border: 1px solid rgba(255, 255, 255, 0.1);
  --tooltip-font-size: 12px;
  --tooltip-line-height: 1.4;

  --info-overlay-offset: 40px;
  --info-overlay-width: 240px;
  --info-card-radius: 20px;
  --info-card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
}

* {
  box-sizing: border-box;
}

body {
  background: var(--page-bg);
  font-family: var(--font-sans);
  color: var(--ink);
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  padding: 0;
  margin: 0;
}

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.document-card {
  background: var(--card-bg);
  box-shadow: var(--shadow-card);
  overflow: hidden;
  margin: 0 var(--page-gutter);
  width: 100%;
  max-width: var(--content-max-width);
  display: flex;
  flex-direction: column;
  align-items: center;
}

.page-header {
  width: 100%;
  max-width: var(--content-max-width);
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: var(--header-margin-bottom);
}

.header-logo {
  width: 100%;
  height: auto;
}

.wrap {
  position: relative;
  width: min(var(--content-max-width-tight), 98vw);
  background: var(--card-bg);
}

svg {
  width: 100%;
  height: auto;
  display: block;
}

.download-section {
  width: 100%;
  max-width: var(--content-max-width-tight);
  padding: var(--section-padding);
  display: flex;
  justify-content: center;
  gap: var(--download-gap);
}

.filter-section {
  width: 100%;
  max-width: var(--content-max-width-tight);
  padding-right: var(--filter-padding-right);
  margin-bottom: var(--filter-margin-bottom);
  display: flex;
  justify-content: flex-end;
}

.filter-group {
  display: flex;
  flex-direction: column;
  gap: var(--filter-group-gap);
  width: fit-content;
}

.filter-row {
  display: flex;
  gap: var(--filter-row-gap);
  width: 100%;
}

.filter-button {
  font-family: var(--font-sans);
  font-size: var(--button-font-size);
  font-weight: var(--button-font-weight);
  padding: var(--filter-button-padding);
  background: var(--accent);
  color: #fff;
  border: 2px solid var(--accent);
  border-radius: var(--button-radius);
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: var(--shadow-button);
  flex: 1;
  white-space: nowrap;
}

.filter-button:hover {
  background: var(--accent-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-button-hover);
}

.filter-button:not(.active) {
  background: var(--card-bg);
  color: var(--accent-muted);
  border-color: var(--accent-border);
  box-shadow: none;
  opacity: 1;
}

.filter-button:not(.active):hover {
  background: var(--accent-soft);
  opacity: 0.8;
}

.download-button,
.reset-button {
  font-family: var(--font-sans);
  font-size: var(--button-font-size);
  font-weight: var(--button-font-weight);
  padding: var(--button-padding);
  border-radius: var(--button-radius);
  cursor: pointer;
  transition: all 0.2s ease;
}

.download-button {
  position: relative;
  left: var(--download-button-offset-x);
  background: var(--accent);
  color: #fff;
  border: none;
  box-shadow: var(--shadow-button);
}

.reset-button {
  background: var(--card-bg);
  color: var(--accent);
  border: 1px solid var(--accent);
  box-shadow: var(--shadow-button-secondary);
}

.download-button:hover {
  background: var(--accent-hover);
  transform: translateY(-1px);
  box-shadow: var(--shadow-button-hover);
}

.reset-button:hover {
  background: var(--accent-soft);
  transform: translateY(-1px);
  box-shadow: var(--shadow-button-secondary-hover);
}

.download-button:active,
.reset-button:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(75, 37, 130, 0.3);
}

.download-button:focus,
.reset-button:focus {
  outline: 3px solid var(--accent-outline);
  outline-offset: 2px;
}

.download-button:focus:not(:focus-visible),
.reset-button:focus:not(:focus-visible) {
  outline: none;
}

.page-footer {
  width: 100%;
  max-width: var(--content-max-width);
  display: flex;
  gap: var(--footer-gap);
  padding: var(--footer-padding);
}

.footer-left {
  flex: 0 0 var(--footer-left-width);
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  padding-right: 20px;
}

.footer-description {
  text-align: justify;
  font-style: italic;
  font-size: 14px;
  line-height: 1.5;
  color: var(--ink-muted);
  margin: 0 0 15px 0;
}

.footer-right {
  flex: 1;
}

.ring-legend-grid {
  display: grid;
  grid-template-columns: var(--ring-grid-columns);
  gap: var(--ring-grid-gap);
}

.ring-card {
  padding: var(--ring-card-padding);
  border-radius: var(--ring-card-radius);
}

.ring-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.ring-card-title {
  font-weight: 600;
  font-size: 14px;
  color: var(--ink);
}

.ring-card-time {
  font-size: 12px;
  color: var(--ink-muted-2);
}

.ring-card-desc {
  font-size: 12px;
  line-height: 1.4;
  color: var(--ink-muted-3);
  margin: 0;
}

.ring-card.ring-1 {
  background: var(--ring-card-bg);
  border-left: var(--ring-card-border-width) solid var(--ring-color-1);
}

.ring-card.ring-2 {
  background: var(--ring-card-bg);
  border-left: var(--ring-card-border-width) solid var(--ring-color-2);
}

.ring-card.ring-3 {
  background: var(--ring-card-bg);
  border-left: var(--ring-card-border-width) solid var(--ring-color-3);
}

.ring-card.ring-4 {
  background: var(--ring-card-bg);
  border-left: var(--ring-card-border-width) solid var(--ring-color-4);
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.grid circle {
  stroke: var(--muted2);
  stroke-dasharray: 4, 4;
}

.month-arc {
  transition: all 0.3s ease;
  cursor: pointer;
}

.month-arc,
.ring-segment {
  stroke: none;
  transition: all 0.3s ease;
  cursor: pointer;
}

.month-arc.is-dimmed,
.ring-segment.is-dimmed {
  opacity: 0.15;
  filter: grayscale(0.8);
}

.month-arc.is-active,
.ring-segment.is-active {
  filter: brightness(1.2);
  stroke: rgba(255, 255, 255, 0.5);
  stroke-width: 1px;
}

.week-segment {
  pointer-events: all;
  transition: all 0.3s ease;
}

.week-segment.is-current {
  opacity: 1;
}

.week-segment.is-period-active {
  fill: var(--period-active-fill) !important;
  opacity: 1;
}

.label {
  font-size: var(--label-font-size);
  fill: var(--ink);
  font-weight: 400;
  user-select: none;
  letter-spacing: var(--label-letter-spacing);
}

.label.month {
  font-weight: var(--label-month-font-weight);
  font-size: var(--label-month-font-size);
  transition: all 0.3s ease;
}

.label.month.is-active {
  font-size: var(--label-month-font-size-active);
  font-weight: var(--label-month-font-weight-active);
}

.center-label {
  font-family: var(--center-label-font-family);
  font-weight: var(--center-label-font-weight);
  font-size: var(--center-label-font-size);
  fill: var(--ink);
}

.marker-group {
  cursor: pointer;
}

.marker-shape {
  filter: var(--marker-shadow);
  transition: filter 0.3s ease;
}

.marker-group:hover .marker-shape {
  filter: var(--marker-shadow-hover);
}

.event-group {
  cursor: pointer;
  transition: opacity 0.3s ease, filter 0.3s ease;
}

.event-label-ext {
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  font-family: var(--font-sans);
}

.slice-trigger {
  cursor: pointer;
  pointer-events: all;
}

.event-label-ext tspan {
  pointer-events: all;
}

.event-group.is-dimmed,
.connector-group.is-dimmed {
  opacity: 0.15;
  filter: grayscale(0.5);
}

.event-group.is-dimmed .event-label-ext {
  fill: var(--ink-dim);
}

.event-group.is-active-slice .event-label-ext,
.event-group.is-active .event-label-ext {
  font-weight: 700;
}

.connector-line {
  pointer-events: none;
  transition: all 0.3s ease;
  opacity: 0.6;
}

.custom-tooltip {
  position: absolute;
  background: var(--tooltip-bg);
  color: var(--tooltip-text);
  padding: var(--tooltip-padding);
  border-radius: var(--tooltip-radius);
  font-size: var(--tooltip-font-size);
  pointer-events: none;
  box-shadow: var(--tooltip-shadow);
  z-index: 1000;
  border: var(--tooltip-border);
  font-family: var(--font-display);
  line-height: var(--tooltip-line-height);
}

.info-overlay {
  position: absolute;
  top: var(--info-overlay-offset);
  right: var(--info-overlay-offset);
  width: var(--info-overlay-width);
  pointer-events: none;
}

.info-card {
  background: var(--card-bg);
  padding: 16px;
  border-radius: var(--info-card-radius);
  box-shadow: var(--info-card-shadow);
  margin-bottom: 12px;
}

.wcag-mode .event-label-ext {
  fill: hsl(265, 45%, 15%) !important;
}

.wcag-mode .event-label-ext tspan {
  fill: hsl(265, 45%, 15%) !important;
}

.wcag-mode .connector-line {
  opacity: 0.9 !important;
}

.wcag-mode .week-label {
  fill: rgba(0, 0, 0, 0.75);
}

.wcag-mode .week-label.is-current {
  fill: #fff;
}

.wcag-mode .month-arc.is-dimmed,
.wcag-mode .ring-segment.is-dimmed {
  opacity: 0.4;
  filter: grayscale(0.3);
}

.wcag-mode .event-group.is-dimmed,
.wcag-mode .connector-group.is-dimmed {
  opacity: 0.45;
  filter: grayscale(0.15);
}

.wcag-mode .event-group.is-dimmed .event-label-ext {
  fill: hsl(265, 30%, 35%) !important;
}

.wcag-mode .period-segment.is-dimmed {
  opacity: 0.5;
}

.wcag-mode .label.month {
  fill: hsl(265, 50%, 20%) !important;
}

.wcag-mode .label.month.is-dimmed {
  fill: hsl(265, 30%, 40%);
  opacity: 0.75;
}

@media (max-width: 768px) {
  .document-card {
    margin: 0;
    padding: 15px;
    width: 100%;
    border-radius: 0;
  }

  .page-header {
    margin-bottom: 20px;
  }

  .page-footer {
    flex-direction: column;
    padding: 20px;
    gap: 20px;
  }

  .footer-left {
    flex: 0 0 auto;
    width: 100%;
    padding-right: 0;
    align-items: center;
    text-align: center;
  }

  .arrow-decoration {
    display: none;
  }

  .footer-right {
    width: 100%;
  }

  .ring-legend-grid {
    grid-template-columns: 1fr;
    gap: 10px;
  }

  .download-section {
    padding: 20px;
  }
}

@media print {
  @page {
    size: auto;
    margin: 0mm;
  }

  body {
    background: white !important;
    display: block !important;
    height: auto !important;
    min-height: 0 !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  .document-card {
    position: static !important;
    box-shadow: none !important;
    margin: 0 !important;
    padding: 0 !important;
    max-width: none !important;
    width: 100% !important;
    height: auto !important;
    overflow: visible !important;
    display: block !important;
  }

  .wrap {
    width: 100% !important;
    max-width: none !important;
    height: auto !important;
    overflow: visible !important;
  }

  .download-section,
  .filter-section,
  .reset-button,
  .download-button {
    display: none !important;
  }

  svg {
    width: 100% !important;
    height: auto !important;
    max-height: 60vh !important;
    display: block !important;
    margin: 0 auto 10px auto !important;
    page-break-inside: avoid !important;
    break-after: avoid !important;
  }

  .page-footer {
    display: flex !important;
    flex-direction: row !important;
    justify-content: flex-start !important;
    align-items: flex-start !important;
    gap: 20px !important;
    width: 100% !important;
    page-break-inside: avoid !important;
    break-inside: avoid !important;
    box-sizing: border-box !important;
    flex-wrap: nowrap !important;
    padding: 40px 20px 0;
  }

  .footer-left {
    display: flex !important;
    align-items: center !important;
    flex: 0 0 18% !important;
    width: auto !important;
    padding-right: 15px !important;
    text-align: left !important;
  }

  .footer-description {
    color: #000 !important;
    text-align: left !important;
    margin: 0 0 10px 0 !important;
    font-size: 12px !important;
  }

  .footer-right {
    flex: 1 !important;
    width: auto !important;
  }

  .ring-legend-grid {
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    gap: 15px !important;
    align-content: start !important;
  }

  .ring-card {
    padding: 8px 10px !important;
    border-top: 1px solid #eee !important;
    border-right: 1px solid #eee !important;
    border-bottom: 1px solid #eee !important;
    page-break-inside: avoid !important;
  }
}
